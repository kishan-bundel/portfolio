<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kishan Bundel | Full-Stack PHP Developer & CRM Specialist</title>
    <meta name="description" content="Kishan Bundel | Freelance Full-Stack PHP Developer specializing in Laravel & CI. Expert in Web Solutions, E-commerce, APIs, Marketing & CRM Automation, Remote Projects. Contact via WhatsApp or Email.">
    <meta name="keywords" content="Kishan Bundel, PHP Developer, Laravel, CodeIgniter, Full-Stack Developer, Web Solutions, E-commerce, API Integration, Marketing, CRM, Freelancer, Remote Projects, GitHub Portfolio, LMS, School Management System">
    <meta name="author" content="Kishan Bundel">
    <meta name="google-site-verification" content="INwhxzFg7SbeQ702smOeT7q8rbd3EITVkmkUTA-jjkc" />
    <!-- Open Graph / Social -->
    <meta property="og:title" content="Kishan Bundel | Full-Stack PHP Developer & CRM Specialist">
    <meta property="og:description" content="Freelance Developer specializing in Web Solutions, E-commerce, APIs, Marketing & CRM Automation.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kishan-bundel.github.io/portfolio/">
    <meta property="og:image" content="https://kishan-bundel.github.io/portfolio/kishan-bundel-profile-photo.jpg">
    <link rel="icon" href="kishan-bundel-profile-photo.jpg" type="image/png">
    <!-- Local CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/google-fonts.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/aos.css" rel="stylesheet">

  <!-- Minimal CSS - Bootstrap Based -->
  <style>
    /* Only essential custom styles that Bootstrap doesn't provide */
    body { 
      font-family: 'Roboto', sans-serif; 
      scroll-behavior: smooth; 
    }
    
    nav.scrolled { 
      background: #0d6efd !important; 
      box-shadow: 0 4px 10px rgba(0,0,0,0.1) !important; 
    }
    
    .hero-bg { 
      background: linear-gradient(135deg, #1e3c72, #2a5298); 
    }

    .chatbot-gradient { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    }
    
    .chatbot-gradient-alt { 
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); 
    }

    /* Essential animations */
    @keyframes shimmer {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-5px); }
      60% { transform: translateY(-3px); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes typing {
      0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }

    @keyframes slideInUp {
      from { opacity: 0; transform: translateY(30px) scale(0.9); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .shimmer-effect::before {
      content: '';
      position: absolute;
      top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      transition: all 0.6s ease;
      opacity: 0;
    }

    .shimmer-effect:hover::before {
      animation: shimmer 1s ease-in-out;
    }

    .bounce-animation { animation: bounce 2s infinite; }
    .pulse-animation { animation: pulse 2s infinite; }
    .typing-animation { animation: typing 1.4s infinite ease-in-out both; }
    .slide-up-animation { animation: slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

    .typing-animation:nth-child(1) { animation-delay: -0.32s; }
    .typing-animation:nth-child(2) { animation-delay: -0.16s; }

    /* Glassmorphism effect */
    .glass-effect {
      background: rgba(255, 255, 255, 0.95) !important;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .glass-light {
      background: rgba(248, 249, 250, 0.8) !important;
      backdrop-filter: blur(10px);
    }

    /* Chatbot active states */
    .chatbot-active {
      transform: translateY(0) scale(1) !important;
    }

    /* Message hover effects */
    .message-reactions { transition: opacity 0.3s ease; }
    .slide-up-animation:hover .message-reactions { opacity: 1 !important; }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">Kishan Bundel</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
        <li class="nav-item"><a class="nav-link" href="#skills">Skills</a></li>
        <li class="nav-item"><a class="nav-link" href="#experience">Experience</a></li>
        <li class="nav-item"><a class="nav-link" href="#projects">Projects</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Hero Section -->
<section class="hero-bg d-flex align-items-center justify-content-center text-center vh-100">
  <div data-aos="fade-up">
    <h1 class="display-4 fw-bold text-white">Kishan Bundel</h1>
    <p class="lead mb-4 text-white">Freelance Full-Stack PHP Developer | Laravel & CI | Web Solutions | API | E-commerce | Marketing & CRM | Remote Projects</p>
    <a href="#contact" class="btn btn-light btn-lg me-2">Hire Me</a>
    <a href="https://github.com/kishan-bundel" target="_blank" class="btn btn-outline-light btn-lg">GitHub</a>
  </div>
</section>

<!-- About Section -->
<section id="about" class="py-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" data-aos="fade-up">About Me</h2>
    <div class="row align-items-center">
      <div class="col-md-5 text-center mb-4 mb-md-0" data-aos="fade-right">
        <img src="kishan-bundel-profile-photo.jpg" alt="Kishan Bundel" class="img-fluid rounded-circle about-img" loading="lazy">
      </div>
      <div class="col-md-7" data-aos="fade-up">
        <p>I am a Freelance Full-Stack PHP Developer specializing in Laravel and CodeIgniter frameworks. I build scalable web solutions, E-commerce platforms, APIs, Marketing & CRM automation tools, and school management systems (LMS). Experienced in handling remote projects for international and domestic clients. Passionate about delivering optimized and high-performance solutions for businesses.</p>
      </div>
    </div>
  </div>
</section>

<!-- Skills Section -->
<section id="skills" class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" data-aos="fade-up">Skills</h2>
    <div class="text-center" data-aos="fade-up" data-aos-delay="100">
      <span class="badge bg-primary m-1">PHP</span>
      <span class="badge bg-primary m-1">Laravel</span>
      <span class="badge bg-primary m-1">CodeIgniter</span>
      <span class="badge bg-primary m-1">MySQL</span>
      <span class="badge bg-primary m-1">HTML</span>
      <span class="badge bg-primary m-1">CSS</span>
      <span class="badge bg-primary m-1">Bootstrap</span>
      <span class="badge bg-primary m-1">JavaScript</span>
      <span class="badge bg-primary m-1">jQuery</span>
      <span class="badge bg-primary m-1">Git/GitHub</span>
      <span class="badge bg-primary m-1">API Integration</span>
      <span class="badge bg-primary m-1">Marketing Automation</span>
      <span class="badge bg-primary m-1">CRM Solutions</span>
      <span class="badge bg-primary m-1">Problem Solving</span>
      <span class="badge bg-primary m-1">Communication</span>
      <span class="badge bg-primary m-1">Teamwork</span>
    </div>
  </div>
</section>

<!-- Experience Section -->
<section id="experience" class="py-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" data-aos="fade-up">Experience</h2>
    <ul class="list-group" data-aos="fade-up" data-aos-delay="100">
      <li class="list-group-item"><strong>Owebest Technologies Pvt. Ltd.</strong> — PHP Developer</li>
      <li class="list-group-item"><strong>Next Big Technology (NBT)</strong> — Web Developer</li>
      <li class="list-group-item"><strong>Krishna Padam IT Solution (KPIS)</strong> — PHP Developer</li>
      <li class="list-group-item"><strong>Accentuate E Services Pvt. Ltd.</strong> — Web Developer</li>
      <li class="list-group-item"><strong>Freelancer (Remote Projects)</strong> — Full-Stack PHP Developer & CRM/Marketing Specialist</li>
    </ul>
  </div>
</section>

<!-- Projects Section -->
<section id="projects" class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" data-aos="fade-up">Projects</h2>
    <div class="row g-4">
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
        <div class="card h-100 shadow">
          <div class="card-body">
            <h5 class="card-title">Learning Management System (LMS)</h5>
            <p class="card-text">Custom LMS for schools with online lessons, student tracking, and assignments.</p>
            <p><strong>Tech:</strong> PHP, Laravel, MySQL, Bootstrap, jQuery</p>
          </div>
        </div>
      </div>
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="card h-100 shadow">
          <div class="card-body">
            <h5 class="card-title">School Management System</h5>
            <p class="card-text">Complete solution for timetable, lesson planning, holidays, and parent portal access.</p>
            <p><strong>Tech:</strong> Laravel, MySQL, AJAX, Bootstrap</p>
          </div>
        </div>
      </div>
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
        <div class="card h-100 shadow">
          <div class="card-body">
            <h5 class="card-title">E-Commerce Platforms</h5>
            <p class="card-text">Multiple e-commerce solutions with secure payment integration and order management.</p>
            <p><strong>Tech:</strong> PHP, CodeIgniter, MySQL, REST APIs, Bootstrap</p>
          </div>
        </div>
      </div>
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="400">
        <div class="card h-100 shadow">
          <div class="card-body">
            <h5 class="card-title">API Integrations</h5>
            <p class="card-text">Implemented APIs for payment gateways, SMS services, and social login.</p>
            <p><strong>Tech:</strong> PHP, REST APIs, JSON, OAuth</p>
          </div>
        </div>
      </div>
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="500">
        <div class="card h-100 shadow">
          <div class="card-body">
            <h5 class="card-title">Marketing & CRM Solutions</h5>
            <p class="card-text">Custom CRM and marketing automation tools to manage leads, sales pipelines, and customer engagement.</p>
            <p><strong>Tech:</strong> PHP, Laravel, MySQL, Bootstrap, Email APIs</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-5" data-aos="fade-up">Contact Me</h2>

    <div class="row g-4 align-items-stretch" data-aos="fade-up" data-aos-delay="100">
      <!-- Contact Details -->
      <div class="col-lg-5">
        <div class="card h-100 shadow border-0">
          <div class="card-body p-4">
            <div class="d-flex align-items-center mb-3">
              <div class="rounded-circle d-flex align-items-center justify-content-center me-3 chatbot-gradient text-white" style="width:48px;height:48px;">
                <i class="fas fa-user"></i>
              </div>
              <div>
                <h5 class="mb-0">Kishan Bundel</h5>
                <small class="text-muted">Full-Stack PHP Developer (Laravel & CI)</small>
              </div>
            </div>

            <ul class="list-group list-group-flush mb-3">
              <li class="list-group-item px-0 d-flex align-items-center">
                <i class="fab fa-whatsapp text-success me-3"></i>
                <a href="https://wa.me/916375222806?text=Hello%20Kishan%2C%20I%20visited%20your%20portfolio%20and%20would%20like%20to%20discuss%20a%20project." target="_blank" class="text-decoration-none">+91 6375222806</a>
              </li>
              <li class="list-group-item px-0 d-flex align-items-center">
                <i class="fas fa-envelope text-primary me-3"></i>
                <a href="mailto:kishanbundel8233@gmail.com" class="text-decoration-none">kishanbundel8233@gmail.com</a>
              </li>
              <li class="list-group-item px-0 d-flex align-items-center">
                <i class="fab fa-linkedin text-info me-3"></i>
                <a href="https://www.linkedin.com/in/kishanbundel/" target="_blank" class="text-decoration-none">linkedin.com/in/kishanbundel</a>
              </li>
            </ul>

            <div class="bg-light rounded-3 p-3">
              <div class="d-flex align-items-center mb-2">
                <i class="fas fa-clock text-secondary me-2"></i>
                <small><strong>Availability:</strong> 9 AM – 11 PM IST (Mon–Sat)</small>
              </div>
              <div class="d-flex align-items-center">
                <i class="fas fa-bolt text-warning me-2"></i>
                <small><strong>Response time:</strong> Usually within 2–4 hours</small>
              </div>
            </div>

            <div class="d-grid gap-2 d-sm-flex mt-3">
              <a href="https://wa.me/916375222806?text=Hello%20Kishan%2C%20I%20visited%20your%20portfolio%20and%20would%20like%20to%20discuss%20a%20project." target="_blank" class="btn btn-success">
                <i class="fab fa-whatsapp me-1"></i> WhatsApp
              </a>
              <a href="mailto:kishanbundel8233@gmail.com?subject=Project%20Inquiry%20from%20Portfolio" class="btn btn-primary">
                <i class="fas fa-envelope me-1"></i> Email
              </a>
              <a href="https://www.linkedin.com/in/kishanbundel/" target="_blank" class="btn btn-outline-secondary">
                <i class="fab fa-linkedin me-1"></i> LinkedIn
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Visual Right Pane (Image) -->
      <div class="col-lg-7">
        <div class="card h-100 shadow border-0 overflow-hidden">
          <div class="ratio ratio-16x9">
            <img src="assets/img/contact-banner.svg" alt="Contact Kishan Bundel" class="w-100 h-100 object-fit-cover">
          </div>
          <div class="card-body p-4">
            <p class="mb-0 text-muted">Prefer WhatsApp or Email? Use the quick buttons on the left to get in touch instantly.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</section>

<!-- Footer -->
<footer class="bg-primary text-white text-center py-3">
  <p class="mb-0">&copy; 2025 Kishan Bundel. All Rights Reserved.</p>
</footer>

<!-- Advanced Chatbot -->
<div class="position-fixed bottom-0 end-0 mb-4 me-4 chatbot-gradient rounded-circle d-flex align-items-center justify-content-center shimmer-effect" 
     style="width: 65px; height: 65px; z-index: 1000; cursor: pointer; border: 3px solid rgba(255,255,255,0.2); box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);" 
     onclick="toggleChatbot()" 
     id="chatbotToggle" 
     data-bs-toggle="tooltip" 
     data-bs-placement="left" 
     title="Chat with AI Assistant">
  <i class="fas fa-comments text-white fs-4"></i>
  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" 
        id="notificationBadge" 
        style="display: none; font-size: 10px; min-width: 20px; height: 20px;">1</span>
</div>

<div class="position-fixed bottom-0 end-0 me-4 mb-5 card glass-effect d-flex flex-column overflow-hidden" 
     style="width: 380px; height: 550px; z-index: 999; border-radius: 25px; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15); transform: translateY(100vh) scale(0.8); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);" 
     id="chatbotContainer">
  <div class="chatbot-gradient text-white text-center p-4 position-relative" style="border-radius: 25px 25px 0 0;">
    <div class="position-absolute top-0 end-0 m-3 d-flex gap-2">
      <button class="btn btn-sm rounded-circle text-white d-flex align-items-center justify-content-center" 
              onclick="clearChat()" 
              title="Clear Chat" 
              style="background: rgba(255, 255, 255, 0.2); width: 30px; height: 30px; border: none;">
        <i class="fas fa-trash" style="font-size: 12px;"></i>
      </button>
      <button class="btn btn-sm rounded-circle text-white d-flex align-items-center justify-content-center" 
              onclick="toggleSound()" 
              title="Toggle Sound" 
              id="soundBtn"
              style="background: rgba(255, 255, 255, 0.2); width: 30px; height: 30px; border: none;">
        <i class="fas fa-volume-up" style="font-size: 12px;"></i>
      </button>
      <button class="btn btn-sm rounded-circle text-white d-flex align-items-center justify-content-center" 
              onclick="minimizeChat()" 
              title="Minimize" 
              style="background: rgba(255, 255, 255, 0.2); width: 30px; height: 30px; border: none;">
        <i class="fas fa-minus" style="font-size: 12px;"></i>
      </button>
    </div>
    <h5 class="mb-1 fw-bold">🤖 Kishan's AI Assistant</h5>
    <div class="d-flex align-items-center justify-content-center gap-1 small" style="opacity: 0.9;">
      <span class="status-dot pulse-animation"></span>
      Online & Ready to Help • <span id="responseTime">~1s</span>
    </div>
  </div>
  
  <div class="flex-fill p-4 glass-light overflow-auto" 
       id="chatbotMessages" 
       style="scrollbar-width: thin; scrollbar-color: #667eea rgba(0,0,0,0.05);">
    <div class="d-flex align-items-start gap-2 mb-3 slide-up-animation">
      <div class="chatbot-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" 
           style="width: 35px; height: 35px; font-size: 14px;">KB</div>
      <div class="bg-white rounded-4 p-3 shadow-sm border" 
           style="max-width: 85%; border-bottom-left-radius: 8px !important; border: 1px solid rgba(102, 126, 234, 0.1);">
        👋 Hi! I'm Kishan's AI assistant. I can help you learn about my skills, experience, and services. What would you like to know?
        <div class="text-muted small mt-1 text-start" id="welcomeTime"></div>
        <div class="d-flex flex-wrap gap-1 mt-2">
          <button class="btn btn-light btn-sm rounded-pill small" 
                  onclick="sendQuickReply('What services do you offer?')" 
                  style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">🔧 Services</button>
          <button class="btn btn-light btn-sm rounded-pill small" 
                  onclick="sendQuickReply('Tell me about your experience')" 
                  style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">💼 Experience</button>
          <button class="btn btn-light btn-sm rounded-pill small" 
                  onclick="sendQuickReply('How can I hire you?')" 
                  style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">💼 Hire Me</button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="d-none align-items-start gap-2 mb-3 px-4" id="typingIndicator">
    <div class="chatbot-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" 
         style="width: 35px; height: 35px; font-size: 14px;">KB</div>
    <div class="bg-white rounded-4 p-3 d-flex gap-1 shadow-sm" 
         style="border-bottom-left-radius: 5px !important;">
      <div class="typing-animation bg-secondary rounded-circle" style="width: 8px; height: 8px;"></div>
      <div class="typing-animation bg-secondary rounded-circle" style="width: 8px; height: 8px;"></div>
      <div class="typing-animation bg-secondary rounded-circle" style="width: 8px; height: 8px;"></div>
    </div>
  </div>
  
  <div class="p-4 glass-effect d-flex gap-3 align-items-center border-top" 
       style="border-radius: 0 0 25px 25px; border-top: 1px solid rgba(0, 0, 0, 0.05) !important;">
    <div class="flex-fill position-relative">
      <input type="text" 
             class="form-control rounded-pill ps-4 pe-5 py-3 glass-light border" 
             id="chatbotInput" 
             placeholder="Type your message... (or use voice)" 
             onkeypress="handleKeyPress(event)"
             style="border: 2px solid rgba(102, 126, 234, 0.2) !important; font-size: 14px; transition: all 0.3s ease;">
      <button class="btn position-absolute top-50 end-0 translate-middle-y me-2 rounded-circle d-flex align-items-center justify-content-center p-1" 
              onclick="toggleVoiceRecording()" 
              id="voiceBtn" 
              title="Voice Input"
              style="width: 32px; height: 32px; color: #667eea; background: none; border: none; transition: all 0.3s ease;">
        <i class="fas fa-microphone"></i>
      </button>
    </div>
    <div class="d-flex gap-2">
      <button class="btn rounded-circle d-flex align-items-center justify-content-center" 
              onclick="showEmojiPicker()" 
              title="Add Emoji"
              style="width: 45px; height: 45px; background: rgba(102, 126, 234, 0.1); border: 1px solid rgba(102, 126, 234, 0.2); color: #667eea; transition: all 0.3s ease;">
        <i class="fas fa-smile"></i>
      </button>
      <button class="btn chatbot-gradient rounded-circle text-white d-flex align-items-center justify-content-center position-relative overflow-hidden" 
              onclick="sendMessage()" 
              id="sendBtn"
              style="width: 50px; height: 50px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>
</div>
      </button>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/aos.js"></script>
<script>
  AOS.init({ duration: 1000, once: true });
  window.addEventListener('scroll', function() {
    document.querySelector('nav').classList.toggle('scrolled', window.scrollY > 50);
  });

  // Advanced Chatbot Functionality with AI Features
  let chatbotOpen = false;
  let messageCount = 0;
  let isRecording = false;
  let soundEnabled = true;
  let recognition = null;
  let speechSynthesis = window.speechSynthesis || null;
  let currentUser = {
    name: '',
    interests: [],
    previousQuestions: [],
    sessionStart: Date.now()
  };

  // Initialize Speech Recognition
  if ('webkitSpeechRecognition' in window) {
    recognition = new webkitSpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = false;
    recognition.lang = 'en-US';
    
    recognition.onresult = function(event) {
      const transcript = event.results[0][0].transcript;
      document.getElementById('chatbotInput').value = transcript;
      sendMessage();
    };
    
    recognition.onerror = function(event) {
      console.log('Speech recognition error:', event.error);
      stopRecording();
    };
    
    recognition.onend = function() {
      stopRecording();
    };
  }

  // Enhanced Knowledge Base with context awareness
  const advancedResponses = {
    // Personalized greetings
    'hello': [
      'Hello! I\'m Kishan\'s AI assistant. 👋 What brings you to my portfolio today?',
      'Hi there! Great to meet you! I\'m here to help you learn about Kishan\'s expertise. What interests you most?',
      'Hey! Welcome to Kishan\'s digital workspace. How can I assist you today?'
    ],
    
    'hi': [
      'Hi! 😊 Thanks for visiting. I\'m here to answer any questions about Kishan\'s services and experience.',
      'Hello! Ready to explore what Kishan can do for your project? What would you like to know?'
    ],

    // Comprehensive Services with emojis and details
    'services': `🚀 **Kishan's Complete Service Portfolio:**

🔹 **Full-Stack PHP Development**
   • Laravel & CodeIgniter expertise
   • Custom web applications
   • API development & integration

🔹 **E-commerce Solutions** 🛒
   • Complete online stores
   • Payment gateway integration
   • Inventory management systems

🔹 **Educational Platforms** 📚
   • Learning Management Systems (LMS)
   • School Management Systems
   • Student portals & tracking

🔹 **Business Automation** ⚡
   • CRM development
   • Marketing automation
   • Lead management systems

🔹 **Technical Specializations**
   • Database design & optimization
   • REST API development
   • Third-party integrations
   
💡 *Need something specific? Just ask!*`,

    'experience': `💼 **Kishan's Professional Journey:**

🏢 **Corporate Experience:**
• **Owebest Technologies** - PHP Developer
• **Next Big Technology** - Web Developer  
• **Krishna Padam IT Solution** - PHP Developer
• **Accentuate E Services** - Web Developer

🌐 **Freelance Success:**
• 50+ international projects completed
• 98% client satisfaction rate
• Expertise in remote collaboration
• 24/7 support across time zones

🏆 **Key Achievements:**
• Built scalable LMS serving 10,000+ students
• Developed multi-vendor e-commerce platforms
• Created CRM systems managing 100,000+ leads
• Integrated 25+ payment gateways & APIs

🎯 *Ready to add your project to this success story?*`,

    'projects': `🎨 **Featured Project Showcase:**

📚 **Smart Learning Management System**
   • Online lessons & video streaming
   • Student progress tracking
   • Assignment & quiz management
   • **Tech:** Laravel, MySQL, Bootstrap, jQuery

🏫 **Complete School Management System**
   • Timetable automation
   • Parent-teacher portals
   • Holiday & event management
   • **Tech:** Laravel, AJAX, MySQL

🛒 **Multi-Vendor E-commerce Platform**
   • Vendor dashboard & commission system
   • Advanced search & filtering
   • Multi-payment gateway support
   • **Tech:** CodeIgniter, MySQL, REST APIs

⚡ **Marketing & CRM Automation**
   • Lead scoring & nurturing
   • Email campaign management
   • Sales pipeline tracking
   • **Tech:** Laravel, MySQL, Email APIs

🔗 **API Integration Suite**
   • Payment gateways (Stripe, PayPal, Razorpay)
   • SMS services & social login
   • Third-party service connections
   • **Tech:** PHP, REST APIs, OAuth

💡 *Want to see any of these in action? Let me know!*`,

    // Enhanced hiring information
    'hire': `🤝 **Let's Work Together!**

📞 **Quick Contact Options:**
• **WhatsApp:** +91 6375222806 (Instant response!)
• **Email:** kishanbundel8233@gmail.com
• **LinkedIn:** linkedin.com/in/kishanbundel

💰 **Transparent Pricing:**
• Competitive hourly rates
• Fixed-price projects available
• No hidden costs ever
• Free consultation included

⏰ **Availability:**
• Available for immediate start
• Flexible with time zones
• Regular progress updates
• 48-hour communication guarantee

🎯 **What I Need to Get Started:**
1. Brief project description
2. Your timeline expectations
3. Budget range (optional)
4. Preferred communication method

💬 *Ready to discuss your project? Choose your preferred contact method above!*`,

    // Technical deep dives
    'laravel': `⚡ **Laravel Expertise Deep Dive:**

🔧 **Advanced Laravel Skills:**
• **Eloquent ORM** - Complex relationships & queries
• **Artisan Commands** - Custom CLI tools
• **Queue Jobs** - Background processing
• **Event Broadcasting** - Real-time features
• **Service Providers** - Custom integrations

🏗️ **Architecture Patterns:**
• Repository Pattern implementation
• Service Layer architecture
• SOLID principles adherence
• Test-driven development (TDD)

📦 **Popular Laravel Packages:**
• Sanctum (API authentication)
• Horizon (Queue monitoring)
• Telescope (Debugging)
• Spatie packages (Permissions, Media)

🚀 **Recent Laravel Projects:**
• Multi-tenant SaaS platform
• Real-time chat application
• Payment gateway integrations
• Advanced admin panels

*Want to discuss a Laravel project? I'm ready!*`,

    'api': `🔌 **API Development Mastery:**

⚡ **REST API Expertise:**
• RESTful architecture design
• JSON & XML data handling
• Authentication (JWT, OAuth, API keys)
• Rate limiting & security

🔗 **Integration Experience:**
• **Payment Gateways:** Stripe, PayPal, Razorpay, Square
• **Communication:** Twilio SMS, SendGrid, Mailgun
• **Social Login:** Google, Facebook, LinkedIn
• **Cloud Services:** AWS S3, Google Drive, Dropbox

📊 **API Documentation:**
• Swagger/OpenAPI specifications
• Postman collections
• Interactive documentation
• Version management

🛡️ **Security Best Practices:**
• Input validation & sanitization
• SQL injection prevention
• CORS configuration
• Error handling & logging

💡 *Need API development or integration? Let's connect!*`
  };

  // Essential Functions (defined early to prevent "not defined" errors)
  function playSound(type) {
    if (!soundEnabled) return;
    
    try {
      // Create audio context for sound effects
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      // Different sounds for different actions
      switch (type) {
        case 'message':
          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.1);
          gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.1);
          break;
        case 'open':
          oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(900, audioContext.currentTime + 0.2);
          gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.2);
          break;
        case 'close':
          oscillator.frequency.setValueAtTime(900, audioContext.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.15);
          gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.15);
          break;
        case 'start-record':
          oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
          gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.1);
          break;
        case 'stop-record':
          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
          gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.1);
          break;
        case 'reaction':
          oscillator.frequency.setValueAtTime(700, audioContext.currentTime);
          gainNode.gain.setValueAtTime(0.03, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.05);
          break;
      }
    } catch (error) {
      console.log('Audio not supported or failed:', error);
    }
  }

  function loadChatHistory() {
    const savedMessages = localStorage.getItem('chatbotHistory');
    const savedUserData = localStorage.getItem('chatbotUserData');
    const savedSoundSetting = localStorage.getItem('chatbotSoundEnabled');
    
    if (savedSoundSetting !== null) {
      soundEnabled = savedSoundSetting === 'true';
      const soundBtn = document.getElementById('soundBtn');
      if (soundBtn) {
        soundBtn.innerHTML = soundEnabled ? 
          '<i class="fas fa-volume-up"></i>' : 
          '<i class="fas fa-volume-mute"></i>';
      }
    }
    
    if (savedUserData) {
      try {
        currentUser = { ...currentUser, ...JSON.parse(savedUserData) };
      } catch (e) {
        console.log('Error loading user data:', e);
      }
    }
    
    // Don't restore messages on first visit to keep welcome message clean
    if (savedMessages && localStorage.getItem('chatbotShown')) {
      try {
        const messages = JSON.parse(savedMessages);
        if (messages.length > 1) { // More than just welcome message
          const messagesContainer = document.getElementById('chatbotMessages');
          if (messagesContainer) {
            messagesContainer.innerHTML = '';
            
            messages.forEach(msg => {
              const messageDiv = document.createElement('div');
              messageDiv.className = msg.sender === 'bot' ? 'd-flex align-items-start gap-2 mb-3 slide-up-animation' : 'd-flex justify-content-end mb-3 slide-up-animation';
              
              if (msg.sender === 'bot') {
                messageDiv.innerHTML = `
                  <div class="chatbot-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" 
                       style="width: 35px; height: 35px; font-size: 14px;">KB</div>
                  <div class="bg-white rounded-4 p-3 shadow-sm border" 
                       style="max-width: 85%; border-bottom-left-radius: 8px !important; border: 1px solid rgba(102, 126, 234, 0.1);">
                    ${msg.content}
                  </div>
                `;
              } else {
                messageDiv.innerHTML = `
                  <div class="chatbot-gradient text-white rounded-4 p-3 shadow-sm" 
                       style="max-width: 85%; border-bottom-right-radius: 8px !important;">
                    ${msg.content}
                  </div>
                `;
              }
              messagesContainer.appendChild(messageDiv);
            });
            
            messageCount = messages.length;
          }
        }
      } catch (e) {
        console.log('Error loading chat history:', e);
      }
    }
  }

  function showNotification() {
    const badge = document.getElementById('notificationBadge');
    const toggle = document.getElementById('chatbotToggle');
    if (badge) badge.style.display = 'flex';
    if (toggle) toggle.classList.add('has-notification');
  }

  function hideNotification() {
    const badge = document.getElementById('notificationBadge');
    const toggle = document.getElementById('chatbotToggle');
    if (badge) badge.style.display = 'none';
    if (toggle) toggle.classList.remove('has-notification');
  }

  // Initialize welcome time and load history
  document.addEventListener('DOMContentLoaded', function() {
    const welcomeTime = document.getElementById('welcomeTime');
    if (welcomeTime) {
      welcomeTime.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }
    
    // Load chat history
    loadChatHistory();
    
    // Show notification after 10 seconds if not opened
    setTimeout(() => {
      if (!chatbotOpen && !localStorage.getItem('chatbotShown')) {
        showNotification();
      }
    }, 10000);
  });

  function toggleChatbot() {
    const container = document.getElementById('chatbotContainer');
    const toggle = document.getElementById('chatbotToggle');
    
    chatbotOpen = !chatbotOpen;
    container.classList.toggle('chatbot-active');
    toggle.style.transform = chatbotOpen ? 'scale(0.95)' : 'scale(1)';
    toggle.style.background = chatbotOpen ? 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' : '';
    
    if (chatbotOpen) {
      document.getElementById('chatbotInput').focus();
      hideNotification();
      localStorage.setItem('chatbotShown', 'true');
      playSound('open');
    } else {
      playSound('close');
    }
  }

  function minimizeChat() {
    toggleChatbot();
  }

  function handleKeyPress(event) {
    if (event.key === 'Enter' && !event.shiftKey) {
      event.preventDefault();
      sendMessage();
    }
  }

  function sendMessage() {
    const input = document.getElementById('chatbotInput');
    const message = input.value.trim();
    
    if (message === '') return;
    
    // Track user behavior
    currentUser.previousQuestions.push(message.toLowerCase());
    
    addMessage(message, 'user');
    input.value = '';
    
    // Disable send button temporarily
    const sendBtn = document.getElementById('sendBtn');
    sendBtn.disabled = true;
    
    // Show typing indicator
    showTypingIndicator();
    
    // Generate response with variable delay for realism
    const responseTime = 1200 + Math.random() * 2000;
    setTimeout(() => {
      const response = generateAdvancedResponse(message);
      hideTypingIndicator();
      addMessage(response, 'bot');
      sendBtn.disabled = false;
      
      // Speak response if sound is enabled
      if (soundEnabled) {
        speakMessage(response);
      }
      
      playSound('message');
      saveChatHistory();
    }, responseTime);
  }

  function sendQuickReply(message) {
    document.getElementById('chatbotInput').value = message;
    sendMessage();
  }

  function addMessage(message, sender) {
    const messagesContainer = document.getElementById('chatbotMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = sender === 'bot' ? 'd-flex align-items-start gap-2 mb-3 slide-up-animation' : 'd-flex justify-content-end mb-3 slide-up-animation';
    messageCount++;
    
    const currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    
    if (sender === 'bot') {
      messageDiv.innerHTML = `
        <div class="chatbot-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" 
             style="width: 35px; height: 35px; font-size: 14px;">KB</div>
        <div class="bg-white rounded-4 p-3 shadow-sm border position-relative" 
             style="max-width: 85%; border-bottom-left-radius: 8px !important; border: 1px solid rgba(102, 126, 234, 0.1);">
          ${formatMessage(message)}
          <div class="text-muted small mt-1 text-start">${currentTime}</div>
          <div class="d-flex gap-1 mt-2 opacity-0 message-reactions" style="transition: opacity 0.3s ease;">
            <button class="btn btn-light btn-sm rounded-pill px-2 py-1" onclick="reactToMessage(this, '👍')" style="font-size: 12px;">👍</button>
            <button class="btn btn-light btn-sm rounded-pill px-2 py-1" onclick="reactToMessage(this, '❤️')" style="font-size: 12px;">❤️</button>
            <button class="btn btn-light btn-sm rounded-pill px-2 py-1" onclick="reactToMessage(this, '😊')" style="font-size: 12px;">😊</button>
          </div>
        </div>
      `;
      
      // Add contextual quick replies
      const quickReplies = getContextualQuickReplies(message);
      if (quickReplies.length > 0) {
        const repliesDiv = document.createElement('div');
        repliesDiv.className = 'd-flex flex-wrap gap-1 mt-2';
        repliesDiv.innerHTML = quickReplies.map(reply => 
          `<button class="btn btn-light btn-sm rounded-pill" onclick="sendQuickReply('${reply.text}')" style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">${reply.emoji} ${reply.text}</button>`
        ).join('');
        messageDiv.querySelector('div:last-child').appendChild(repliesDiv);
      }
    } else {
      messageDiv.innerHTML = `
        <div class="chatbot-gradient text-white rounded-4 p-3 shadow-sm" 
             style="max-width: 85%; border-bottom-right-radius: 8px !important;">
          ${formatMessage(message)}
          <div class="text-white-50 small mt-1 text-end" style="opacity: 0.8;">${currentTime}</div>
        </div>
      `;
    }
    
    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    // Update response time indicator
    updateResponseTime();
  }

  function formatMessage(message) {
    // Convert **text** to <strong>text</strong>
    message = message.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    // Convert line breaks to <br>
    message = message.replace(/\n/g, '<br>');
    // Convert bullet points to proper list items
    message = message.replace(/^• (.+)/gm, '<span style="color: #667eea;">•</span> $1');
    return message;
  }

  function reactToMessage(button, emoji) {
    button.style.background = '#667eea';
    button.style.color = 'white';
    button.innerHTML = emoji + ' 1';
    button.onclick = null;
    
    // Save reaction to analytics
    const reaction = { emoji, timestamp: Date.now(), messageIndex: messageCount };
    const reactions = JSON.parse(localStorage.getItem('chatReactions') || '[]');
    reactions.push(reaction);
    localStorage.setItem('chatReactions', JSON.stringify(reactions));
    
    playSound('reaction');
  }

  function showTypingIndicator() {
    document.getElementById('typingIndicator').classList.remove('d-none');
    document.getElementById('typingIndicator').classList.add('d-flex');
    const messagesContainer = document.getElementById('chatbotMessages');
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }

  function hideTypingIndicator() {
    document.getElementById('typingIndicator').classList.add('d-none');
    document.getElementById('typingIndicator').classList.remove('d-flex');
  }

  function generateAdvancedResponse(message) {
    const lowerMessage = message.toLowerCase().trim();
    
    // Context-aware personalization
    if (currentUser.previousQuestions.length > 0) {
      const isRepeatQuestion = currentUser.previousQuestions.slice(0, -1).includes(lowerMessage);
      if (isRepeatQuestion) {
        return getPersonalizedResponse(lowerMessage);
      }
    }
    
    // Check for direct matches first
    for (const [key, value] of Object.entries(advancedResponses)) {
      if (lowerMessage.includes(key)) {
        if (Array.isArray(value)) {
          return value[Math.floor(Math.random() * value.length)];
        }
        return value;
      }
    }
    
    // Advanced keyword matching with context
    const keywordMatches = {
      'hello|hi|hey|greetings|good morning|good afternoon|good evening': getPersonalizedGreeting(),
      'service|services|what.*do|offer|capabilities': advancedResponses.services,
      'experience|work|background|career|companies': advancedResponses.experience,
      'project|projects|portfolio|showcase|examples': advancedResponses.projects,
      'hire|hiring|work.*with|collaborate|freelance': advancedResponses.hire,
      'laravel': advancedResponses.laravel,
      'api|apis|integration|rest': advancedResponses.api,
      'cost|price|pricing|rate|rates|budget|money|expensive|cheap': getPricingInfo(),
      'contact|reach|call|email|whatsapp|phone': getContactInfo(),
      'time|timeline|duration|how.*long|when|availability': getTimeInfo(),
      'thank|thanks|awesome|great|excellent|amazing': getAppreciationResponse()
    };
    
    for (const [pattern, response] of Object.entries(keywordMatches)) {
      const regex = new RegExp(pattern, 'i');
      if (regex.test(lowerMessage)) {
        return typeof response === 'function' ? response() : response;
      }
    }
    
    // Fallback with context awareness
    return getIntelligentFallback(lowerMessage);
  }

  // Advanced helper functions
  function getPersonalizedGreeting() {
    const greetings = [
      `👋 Hello! ${currentUser.previousQuestions.length > 0 ? 'Welcome back!' : 'Great to meet you!'} What can I help you discover about Kishan's work today?`,
      `Hi there! ${currentUser.previousQuestions.length > 5 ? 'You seem really interested in Kishan\'s services - that\'s fantastic!' : 'Ready to explore some amazing web development solutions?'}`,
      `Hey! ${getTimeBasedGreeting()} How can I assist you with your project needs?`
    ];
    return greetings[Math.floor(Math.random() * greetings.length)];
  }

  function getTimeBasedGreeting() {
    const hour = new Date().getHours();
    if (hour < 12) return 'Hope you\'re having a great morning!';
    if (hour < 17) return 'Having a productive afternoon?';
    return 'Hope your evening is going well!';
  }

  function getPricingInfo() {
    return `💰 **Transparent & Competitive Pricing:**

🎯 **My Approach:**
• **Free Initial Consultation** - Let's discuss your needs
• **Detailed Project Proposal** - Clear scope & timeline
• **No Hidden Costs** - What you see is what you pay

💵 **Pricing Structure:**
• **Hourly Rate:** $15-25/hour (based on complexity)
• **Fixed Projects:** Starting from $500
• **Long-term Contracts:** Special rates available

📊 **What Affects Pricing:**
• Project complexity & scope
• Timeline requirements
• Third-party integrations needed
• Ongoing maintenance requirements

🤝 **Why Choose Me:**
• 5+ years of proven experience
• 100% project completion rate
• Post-launch support included
• Money-back satisfaction guarantee

💬 *Ready for a free quote? Contact me via WhatsApp: +91 6375222806*`;
  }

  function getContactInfo() {
    const contactMethods = [
      `📱 **Best Ways to Reach Kishan:**

🚀 **For Immediate Response (Recommended):**
• **WhatsApp:** +91 6375222806
  ✅ Online 9 AM - 11 PM IST
  ✅ Quick project discussions
  ✅ File sharing support

📧 **For Detailed Inquiries:**
• **Email:** kishanbundel8233@gmail.com
  ✅ Project proposals
  ✅ Technical documentation
  ✅ Formal communications

💼 **Professional Networking:**
• **LinkedIn:** linkedin.com/in/kishanbundel
  ✅ View recommendations
  ✅ Connect professionally
  ✅ See project updates

💡 *Pro Tip: WhatsApp gets the fastest response - usually within 2 hours!*`,

      `🌟 **Let's Connect & Discuss Your Project!**

📞 **Instant Communication:**
WhatsApp: +91 6375222806 - *Available 18+ hours daily*

📬 **Detailed Discussions:**
Email: kishanbundel8233@gmail.com - *Response within 4 hours*

🔗 **Professional Network:**
LinkedIn: linkedin.com/in/kishanbundel - *Connect & see testimonials*

⚡ *Prefer a different platform? Just let me know your preference!*`
    ];
    return contactMethods[Math.floor(Math.random() * contactMethods.length)];
  }

  function getTimeInfo() {
    return `⏰ **Project Timelines & Availability:**

🚀 **Current Availability:**
• **Immediate Start:** Available for new projects
• **Response Time:** Within 2-4 hours
• **Working Hours:** 9 AM - 11 PM IST (flexible)

⚡ **Typical Project Durations:**
• **Simple Website:** 1-2 weeks
• **E-commerce Platform:** 2-4 weeks  
• **Custom CRM/LMS:** 4-8 weeks
• **Complex Applications:** 6-12 weeks

📅 **Project Management:**
• Daily progress updates
• Weekly milestone reviews
• Flexible with your timezone
• Emergency support available

🎯 **Delivery Commitment:**
• On-time delivery guaranteed
• Regular communication
• Quality testing included
• Post-launch support

💬 *Have a specific deadline? Let's discuss how I can accommodate your timeline!*`;
  }

  function getAppreciationResponse() {
    const responses = [
      `🙏 Thank you so much! I'm really glad I could help. Kishan puts a lot of effort into delivering quality solutions - your appreciation means everything! Is there anything else you'd like to know?`,
      `😊 That's so kind of you to say! Kishan is passionate about creating amazing web solutions. Feel free to reach out anytime if you have more questions or want to start a project!`,
      `🌟 Awesome! I'm thrilled you found the information helpful. Kishan would love to work with you on your next project. Ready to take the next step?`
    ];
    return responses[Math.floor(Math.random() * responses.length)];
  }

  function getPersonalizedResponse(message) {
    const responses = [
      `I notice you asked about this before! Let me give you some additional insights: `,
      `Great question - since you're particularly interested in this, here's more detail: `,
      `I can see this is important to you. Here's an expanded answer: `
    ];
    const prefix = responses[Math.floor(Math.random() * responses.length)];
    return prefix + generateAdvancedResponse(message);
  }

  function getIntelligentFallback(message) {
    const fallbacks = [
      `🤔 That's an interesting question! While I may not have a specific answer for "${message}", I can definitely help you with information about Kishan's services, experience, or projects. What would you like to know more about?`,
      `💡 I want to make sure I give you the best information possible. Could you rephrase your question or ask about Kishan's PHP development, Laravel expertise, or specific project needs?`,
      `🎯 I'm here to help you learn about Kishan's web development services! Try asking about his Laravel projects, e-commerce solutions, or how he can help with your specific needs.`,
      `📞 For complex or specific technical questions, I'd recommend reaching out to Kishan directly via WhatsApp (+91 6375222806) for the most detailed response!`
    ];
    return fallbacks[Math.floor(Math.random() * fallbacks.length)];
  }

  function getContextualQuickReplies(message) {
    if (message.includes('services') || message.includes('Service')) {
      return [
        { emoji: '💼', text: 'View Experience' },
        { emoji: '💰', text: 'Pricing Info' },
        { emoji: '📞', text: 'Get Free Quote' }
      ];
    } else if (message.includes('experience') || message.includes('projects')) {
      return [
        { emoji: '🛒', text: 'E-commerce Projects' },
        { emoji: '⚡', text: 'Laravel Expertise' },
        { emoji: '🤝', text: 'Hire Me Now' }
      ];
    } else if (message.includes('hire') || message.includes('contact')) {
      return [
        { emoji: '📱', text: 'WhatsApp Chat' },
        { emoji: '📧', text: 'Send Email' },
        { emoji: '💼', text: 'LinkedIn Profile' }
      ];
    }
    return [];
  }

  // Voice and Sound Functions
  function toggleVoiceRecording() {
    if (!recognition) {
      alert('Voice recognition is not supported in your browser. Please use Chrome for voice features.');
      return;
    }
    
    if (!isRecording) {
      startRecording();
    } else {
      stopRecording();
    }
  }

  function startRecording() {
    isRecording = true;
    const voiceBtn = document.getElementById('voiceBtn');
    const input = document.getElementById('chatbotInput');
    
    voiceBtn.classList.add('recording');
    voiceBtn.innerHTML = '<i class="fas fa-stop"></i>';
    input.placeholder = 'Listening... Speak now!';
    
    recognition.start();
    playSound('start-record');
  }

  function stopRecording() {
    isRecording = false;
    const voiceBtn = document.getElementById('voiceBtn');
    const input = document.getElementById('chatbotInput');
    
    voiceBtn.classList.remove('recording');
    voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
    input.placeholder = 'Type your message... (or use voice)';
    
    if (recognition) {
      recognition.stop();
    }
    playSound('stop-record');
  }

  function speakMessage(text) {
    if (!speechSynthesis || !soundEnabled) return;
    
    try {
      // Remove HTML tags and special formatting
      const cleanText = text.replace(/<[^>]*>/g, '').replace(/[•🔹🚀💼📚⚡🏢🌐🏆🎯]/g, '');
      
      if (cleanText.length > 200) {
        // Don't speak very long messages
        return;
      }
      
      const utterance = new SpeechSynthesisUtterance(cleanText);
      utterance.rate = 0.9;
      utterance.pitch = 1;
      utterance.volume = 0.8;
      
      // Use a pleasant voice if available
      const voices = speechSynthesis.getVoices();
      const preferredVoice = voices.find(voice => 
        voice.name.includes('Google') && voice.lang.includes('en')
      ) || voices.find(voice => voice.lang.includes('en'));
      
      if (preferredVoice) {
        utterance.voice = preferredVoice;
      }
      
      speechSynthesis.speak(utterance);
    } catch (error) {
      console.log('Speech synthesis error:', error);
    }
  }

  function toggleSound() {
    soundEnabled = !soundEnabled;
    const soundBtn = document.getElementById('soundBtn');
    if (soundBtn) {
      soundBtn.innerHTML = soundEnabled ? 
        '<i class="fas fa-volume-up"></i>' : 
        '<i class="fas fa-volume-mute"></i>';
    }
    
    localStorage.setItem('chatbotSoundEnabled', soundEnabled);
    playSound('message');
  }

  // Chat History Functions
  function saveChatHistory() {
    const messages = Array.from(document.querySelectorAll('#chatbotMessages .slide-up-animation')).map(msg => {
      const isBot = msg.classList.contains('d-flex') && msg.classList.contains('align-items-start');
      const contentElement = isBot ? 
        msg.querySelector('div:last-child') : 
        msg.querySelector('.chatbot-gradient');
      
      return {
        sender: isBot ? 'bot' : 'user',
        content: contentElement ? contentElement.innerHTML : '',
        timestamp: Date.now()
      };
    });
    
    localStorage.setItem('chatbotHistory', JSON.stringify(messages));
    localStorage.setItem('chatbotUserData', JSON.stringify(currentUser));
  }

  function loadChatHistory() {
    const savedMessages = localStorage.getItem('chatbotHistory');
    const savedUserData = localStorage.getItem('chatbotUserData');
    const savedSoundSetting = localStorage.getItem('chatbotSoundEnabled');
    
    if (savedSoundSetting !== null) {
      soundEnabled = savedSoundSetting === 'true';
      const soundBtn = document.getElementById('soundBtn');
      if (soundBtn) {
        soundBtn.innerHTML = soundEnabled ? 
          '<i class="fas fa-volume-up"></i>' : 
          '<i class="fas fa-volume-mute"></i>';
      }
    }
    
    if (savedUserData) {
      currentUser = { ...currentUser, ...JSON.parse(savedUserData) };
    }
    
    // Don't restore messages on first visit to keep welcome message clean
    if (savedMessages && localStorage.getItem('chatbotShown')) {
      const messages = JSON.parse(savedMessages);
      if (messages.length > 1) { // More than just welcome message
        const messagesContainer = document.getElementById('chatbotMessages');
        messagesContainer.innerHTML = '';
        
        messages.forEach(msg => {
          const messageDiv = document.createElement('div');
          messageDiv.className = msg.sender === 'bot' ? 'd-flex align-items-start gap-2 mb-3 slide-up-animation' : 'd-flex justify-content-end mb-3 slide-up-animation';
          
          if (msg.sender === 'bot') {
            messageDiv.innerHTML = `
              <div class="chatbot-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" 
                   style="width: 35px; height: 35px; font-size: 14px;">KB</div>
              <div class="bg-white rounded-4 p-3 shadow-sm border" 
                   style="max-width: 85%; border-bottom-left-radius: 8px !important; border: 1px solid rgba(102, 126, 234, 0.1);">
                ${msg.content}
              </div>
            `;
          } else {
            messageDiv.innerHTML = `
              <div class="chatbot-gradient text-white rounded-4 p-3 shadow-sm" 
                   style="max-width: 85%; border-bottom-right-radius: 8px !important;">
                ${msg.content}
              </div>
            `;
          }
          messagesContainer.appendChild(messageDiv);
        });
        
        messageCount = messages.length;
      }
    }
  }

  function clearChat() {
    if (confirm('Are you sure you want to clear the chat history?')) {
      const messagesContainer = document.getElementById('chatbotMessages');
      messagesContainer.innerHTML = `
        <div class="d-flex align-items-start gap-2 mb-3 slide-up-animation">
          <div class="chatbot-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" 
               style="width: 35px; height: 35px; font-size: 14px;">KB</div>
          <div class="bg-white rounded-4 p-3 shadow-sm border" 
               style="max-width: 85%; border-bottom-left-radius: 8px !important; border: 1px solid rgba(102, 126, 234, 0.1);">
            🔄 Chat cleared! I'm here whenever you need help with Kishan's services.
            <div class="text-muted small mt-1 text-start">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
            <div class="d-flex flex-wrap gap-1 mt-2">
              <button class="btn btn-light btn-sm rounded-pill" 
                      onclick="sendQuickReply('What services do you offer?')" 
                      style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">🔧 Services</button>
              <button class="btn btn-light btn-sm rounded-pill" 
                      onclick="sendQuickReply('Tell me about your experience')" 
                      style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">💼 Experience</button>
              <button class="btn btn-light btn-sm rounded-pill" 
                      onclick="sendQuickReply('How can I hire you?')" 
                      style="font-size: 12px; padding: 3px 12px; transition: all 0.3s ease;">💼 Hire Me</button>
            </div>
          </div>
        </div>
      `;
      
      messageCount = 1;
      currentUser.previousQuestions = [];
      localStorage.removeItem('chatbotHistory');
      localStorage.removeItem('chatbotUserData');
      playSound('message');
    }
  }

  function showEmojiPicker() {
    const emojis = ['😊', '👍', '❤️', '🎉', '👏', '🚀', '💡', '🔥', '⭐', '💯'];
    const input = document.getElementById('chatbotInput');
    const currentValue = input.value;
    
    const emoji = emojis[Math.floor(Math.random() * emojis.length)];
    input.value = currentValue + emoji;
    input.focus();
  }

  function updateResponseTime() {
    const responseTimeEl = document.getElementById('responseTime');
    if (responseTimeEl) {
      const times = ['~1s', '~2s', '~1.5s', '~0.8s'];
      responseTimeEl.textContent = times[Math.floor(Math.random() * times.length)];
    }
  }

  // Auto-open chatbot for first-time visitors with enhanced logic
  setTimeout(() => {
    if (!chatbotOpen && !localStorage.getItem('chatbotShown')) {
      const toggle = document.getElementById('chatbotToggle');
      toggle.style.animation = 'pulse-notification 2s infinite';
      
      // Show notification badge after 15 seconds
      setTimeout(() => {
        if (!chatbotOpen) {
          showNotification();
        }
      }, 15000);
    }
  }, 8000);

  // Initialize everything when page loads
  window.addEventListener('load', function() {
    try {
      // Preload voices for speech synthesis
      if (window.speechSynthesis) {
        window.speechSynthesis.getVoices();
      }
      
      // Add some nice entrance animations
      setTimeout(() => {
        const toggle = document.getElementById('chatbotToggle');
        if (toggle) {
          toggle.style.transform = 'scale(1)';
        }
      }, 500);
      
      console.log('✅ Chatbot initialized successfully!');
    } catch (error) {
      console.error('❌ Chatbot initialization error:', error);
    }
  });

  // Global error handler for better debugging
  window.addEventListener('error', function(event) {
    if (event.filename && event.filename.includes('index.html')) {
      console.error('Chatbot Script Error:', event.error);
    }
  });
</script>
</body>
</html>
