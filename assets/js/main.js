// Lazy load AOS after first interaction
(function(){let o=false;function e(){if(o)return;o=true;const t=document.createElement('link');t.rel='stylesheet';t.href='assets/css/aos.css';document.head.appendChild(t);const n=document.createElement('script');n.src='assets/js/aos.js';n.defer=true;n.onload=function(){if(window.AOS){AOS.init({once:true,duration:700,easing:'ease-out'});}};document.head.appendChild(n);window.removeEventListener('scroll',r,{passive:true});}
function r(){if(window.scrollY>150)e();}
window.addEventListener('scroll',r,{passive:true});['pointerdown','keydown'].forEach(a=>window.addEventListener(a,e,{once:true,passive:true}));})();

// Navbar scroll styling
window.addEventListener('load',()=>{if(window.AOS){AOS.init({duration:1000,once:true});}});
window.addEventListener('scroll',()=>{const n=document.querySelector('nav');if(!n)return;window.scrollY>50?n.classList.add('bg-primary','shadow-sm'):n.classList.remove('bg-primary','shadow-sm');});

// Chatbot state & globals
let chatbotOpen=false,messageCount=0,isRecording=false,soundEnabled=true,recognition=null;let speechSynthesis=window.speechSynthesis||null;let currentUser={name:'',interests:[],previousQuestions:[],sessionStart:Date.now()};

// Speech recognition setup
if('webkitSpeechRecognition'in window){recognition=new webkitSpeechRecognition();recognition.continuous=false;recognition.interimResults=false;recognition.lang='en-US';recognition.onresult=function(e){const t=e.results[0][0].transcript;document.getElementById('chatbotInput').value=t;sendMessage();};recognition.onerror=function(){stopRecording();};recognition.onend=function(){stopRecording();};}

// Lazy load chatbot responses
let responsesLoaded=false;function loadResponsesIfNeeded(){if(responsesLoaded||window.advancedResponses)return Promise.resolve();return new Promise((o,e)=>{const t=document.createElement('script');t.src='assets/js/chatbot-data.js';t.async=true;t.onload=()=>{responsesLoaded=true;o();};t.onerror=e;document.head.appendChild(t);});}

function playSound(e){if(!soundEnabled)return;try{const t=new (window.AudioContext||window.webkitAudioContext)(),n=t.createOscillator(),o=t.createGain();n.connect(o);o.connect(t.destination);switch(e){case'message':n.frequency.setValueAtTime(800,t.currentTime);n.frequency.exponentialRampToValueAtTime(600,t.currentTime+.1);o.gain.setValueAtTime(.1,t.currentTime);o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1);n.start(t.currentTime);n.stop(t.currentTime+.1);break;case'open':n.frequency.setValueAtTime(600,t.currentTime);n.frequency.exponentialRampToValueAtTime(900,t.currentTime+.2);o.gain.setValueAtTime(.05,t.currentTime);o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2);n.start(t.currentTime);n.stop(t.currentTime+.2);break;case'close':n.frequency.setValueAtTime(900,t.currentTime);n.frequency.exponentialRampToValueAtTime(600,t.currentTime+.15);o.gain.setValueAtTime(.05,t.currentTime);o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15);n.start(t.currentTime);n.stop(t.currentTime+.15);break;case'start-record':n.frequency.setValueAtTime(1000,t.currentTime);o.gain.setValueAtTime(.05,t.currentTime);o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1);n.start(t.currentTime);n.stop(t.currentTime+.1);break;case'stop-record':n.frequency.setValueAtTime(800,t.currentTime);o.gain.setValueAtTime(.05,t.currentTime);o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1);n.start(t.currentTime);n.stop(t.currentTime+.1);break;case'reaction':n.frequency.setValueAtTime(700,t.currentTime);o.gain.setValueAtTime(.03,t.currentTime);o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.05);n.start(t.currentTime);n.stop(t.currentTime+.05);break;}}catch{}}

function showNotification(){const e=document.getElementById('notificationBadge');if(e)e.classList.remove('d-none');}
function hideNotification(){const e=document.getElementById('notificationBadge');if(e)e.classList.add('d-none');}

document.addEventListener('DOMContentLoaded',()=>{const e=document.getElementById('welcomeTime');if(e)e.textContent=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});loadChatHistory();const t=document.querySelectorAll('.navbar .nav-link'),n=document.getElementById('navbarNav'),o=document.querySelector('.navbar-toggler');t.forEach(a=>{a.addEventListener('click',()=>{if(!n||!o)return;const r=window.getComputedStyle(o).display!=='none';if(r&&n.classList.contains('show')){const i=bootstrap.Collapse.getInstance(n)||new bootstrap.Collapse(n,{toggle:false});i.hide();}});});setTimeout(()=>{if(!chatbotOpen&&!localStorage.getItem('chatbotShown'))showNotification();},10000);});

function toggleChatbot(){const e=document.getElementById('chatbotContainer');chatbotOpen=!chatbotOpen;e.classList.toggle('d-none');if(chatbotOpen){e.removeAttribute('inert');e.removeAttribute('aria-hidden');loadResponsesIfNeeded().finally(()=>{document.getElementById('chatbotInput').focus();});hideNotification();localStorage.setItem('chatbotShown','true');playSound('open');}else{playSound('close');e.setAttribute('aria-hidden','true');e.setAttribute('inert','');}}
function minimizeChat(){toggleChatbot();}
function handleKeyPress(e){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}}

function sendMessage(){const e=document.getElementById('chatbotInput'),t=e.value.trim();if(t==='')return;currentUser.previousQuestions.push(t.toLowerCase());addMessage(t,'user');e.value='';const n=document.getElementById('sendBtn');n.disabled=true;showTypingIndicator();const o=1200+Math.random()*2000;setTimeout(()=>{const r=generateAdvancedResponse(t);hideTypingIndicator();addMessage(r,'bot');n.disabled=false;if(soundEnabled)speakMessage(r);playSound('message');saveChatHistory();},o);}
function sendQuickReply(e){document.getElementById('chatbotInput').value=e;sendMessage();}
function addMessage(e,t){const n=document.getElementById('chatbotMessages'),o=document.createElement('div');o.className=t==='bot'?'d-flex align-items-start gap-2 mb-3 chat-msg':'d-flex justify-content-end mb-3 chat-msg';messageCount++;const r=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});if(t==='bot'){o.innerHTML=`<div class="bg-primary bg-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" style="width:35px;height:35px;font-size:14px;">KB</div><div class="bg-white rounded-4 p-3 shadow-sm border position-relative" style="max-width:85%;border-bottom-left-radius:8px!important;border:1px solid rgba(102,126,234,.1);">${formatMessage(e)}<div class="text-muted small mt-1 text-start">${r}</div><div class="d-flex gap-1 mt-2 opacity-0 message-reactions" style="transition:opacity .3s ease;"><button class="btn btn-light btn-sm rounded-pill" onclick="reactToMessage(this,'üëç')" style="font-size:12px;">üëç</button><button class="btn btn-light btn-sm rounded-pill" onclick="reactToMessage(this,'‚ù§Ô∏è')" style="font-size:12px;">‚ù§Ô∏è</button><button class="btn btn-light btn-sm rounded-pill" onclick="reactToMessage(this,'üòä')" style="font-size:12px;">üòä</button></div></div>`;const i=getContextualQuickReplies(e);if(i.length>0){const s=document.createElement('div');s.className='d-flex flex-wrap gap-1 mt-2';s.innerHTML=i.map(l=>`<button class="btn btn-light btn-sm rounded-pill" onclick="sendQuickReply('${l.text}')" style="font-size:12px;padding:3px 12px;transition:all .3s ease;">${l.emoji} ${l.text}</button>`).join('');o.querySelector('div:last-child').appendChild(s);} } else {o.innerHTML=`<div class="bg-primary bg-gradient text-white rounded-4 p-3 shadow-sm" style="max-width:85%;border-bottom-right-radius:8px!important;">${formatMessage(e)}<div class="text-white-50 small mt-1 text-end" style="opacity:.8;">${r}</div></div>`;}n.appendChild(o);n.scrollTop=n.scrollHeight;updateResponseTime();}
function formatMessage(e){e=e.replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>');e=e.replace(/\n/g,'<br>');e=e.replace(/^‚Ä¢ (.+)/gm,'<span style="color:#667eea;">‚Ä¢</span> $1');return e;}
function reactToMessage(e,t){e.style.background='#667eea';e.style.color='white';e.innerHTML=t+' 1';e.onclick=null;const n={emoji:t,timestamp:Date.now(),messageIndex:messageCount},o=JSON.parse(localStorage.getItem('chatReactions')||'[]');o.push(n);localStorage.setItem('chatReactions',JSON.stringify(o));playSound('reaction');}
function showTypingIndicator(){const e=document.getElementById('typingIndicator');e.classList.remove('d-none');e.classList.add('d-flex');const t=document.getElementById('chatbotMessages');t.scrollTop=t.scrollHeight;}
function hideTypingIndicator(){const e=document.getElementById('typingIndicator');e.classList.add('d-none');e.classList.remove('d-flex');}
function generateAdvancedResponse(e){const t=e.toLowerCase().trim();if(currentUser.previousQuestions.length>0){const o=currentUser.previousQuestions.slice(0,-1).includes(t);if(o)return getPersonalizedResponse(t);}if(!window.advancedResponses)return getIntelligentFallback(t);for(const [n,o]of Object.entries(window.advancedResponses)){if(t.includes(n)){if(Array.isArray(o))return o[Math.floor(Math.random()*o.length)];return o;}}const r={'hello|hi|hey|greetings|good morning|good afternoon|good evening':advancedResponses.services?getPersonalizedGreeting():getPersonalizedGreeting(),'service|services|what.*do|offer|capabilities':advancedResponses.services,'experience|work|background|career|companies':advancedResponses.experience,'project|projects|portfolio|showcase|examples':advancedResponses.projects,'hire|hiring|work.*with|collaborate|freelance':advancedResponses.hire,'laravel':advancedResponses.laravel,'api|apis|integration|rest':advancedResponses.api,'cost|price|pricing|rate|rates|budget|money|expensive|cheap':getPricingInfo(),'contact|reach|call|email|whatsapp|phone':getContactInfo(),'time|timeline|duration|how.*long|when|availability':getTimeInfo(),'thank|thanks|awesome|great|excellent|amazing':getAppreciationResponse()};for(const [i,s]of Object.entries(r)){const l=new RegExp(i,'i');if(l.test(t))return typeof s==='function'?s():s;}return getIntelligentFallback(t);}
function getPersonalizedGreeting(){const e=[`üëã Hello! ${currentUser.previousQuestions.length>0?'Welcome back!':'Great to meet you!'} What can I help you discover about Kishan's work today?`,`Hi there! ${currentUser.previousQuestions.length>5?"You seem really interested in Kishan's services - that's fantastic!":"Ready to explore some amazing web development solutions?"}`,`Hey! ${getTimeBasedGreeting()} How can I assist you with your project needs?`];return e[Math.floor(Math.random()*e.length)];}
function getTimeBasedGreeting(){const e=new Date().getHours();if(e<12)return"Hope you're having a great morning!";if(e<17)return'Having a productive afternoon?';return'Hope your evening is going well!';}
function getPricingInfo(){return`üí∞ **Transparent & Competitive Pricing:**\n\nüéØ **My Approach:**\n‚Ä¢ **Free Initial Consultation** - Let's discuss your needs\n‚Ä¢ **Detailed Project Proposal** - Clear scope & timeline\n‚Ä¢ **No Hidden Costs** - What you see is what you pay\n\nüíµ **Pricing Structure:**\n‚Ä¢ **Hourly Rate:** $15-25/hour (based on complexity)\n‚Ä¢ **Fixed Projects:** Starting from $500\n‚Ä¢ **Long-term Contracts:** Special rates available\n\nüìä **What Affects Pricing:**\n‚Ä¢ Project complexity & scope\n‚Ä¢ Timeline requirements\n‚Ä¢ Third-party integrations needed\n‚Ä¢ Ongoing maintenance requirements\n\nü§ù **Why Choose Me:**\n‚Ä¢ 5+ years of proven experience\n‚Ä¢ 100% project completion rate\n‚Ä¢ Post-launch support included\n‚Ä¢ Money-back satisfaction guarantee\n\nüí¨ *Ready for a free quote? Contact me via WhatsApp: +91 6375222806*`;}
function getContactInfo(){const e=[`üì± **Best Ways to Reach Kishan:**\n\nüöÄ **For Immediate Response (Recommended):**\n‚Ä¢ **WhatsApp:** +91 6375222806\n  ‚úÖ Online 9 AM - 11 PM IST\n  ‚úÖ Quick project discussions\n  ‚úÖ File sharing support\n\nüìß **For Detailed Inquiries:**\n‚Ä¢ **Email:** kishanbundel8233@gmail.com\n  ‚úÖ Project proposals\n  ‚úÖ Technical documentation\n  ‚úÖ Formal communications\n\nüíº **Professional Networking:**\n‚Ä¢ **LinkedIn:** linkedin.com/in/kishanbundel\n  ‚úÖ View recommendations\n  ‚úÖ Connect professionally\n  ‚úÖ See project updates\n\nüí° *Pro Tip: WhatsApp gets the fastest response - usually within 2 hours!*`,`üåü **Let's Connect & Discuss Your Project!**\n\nüìû **Instant Communication:**\nWhatsApp: +91 6375222806 - *Available 18+ hours daily*\n\nüì¨ **Detailed Discussions:**\nEmail: kishanbundel8233@gmail.com - *Response within 4 hours*\n\nüîó **Professional Network:**\nLinkedIn: linkedin.com/in/kishanbundel - *Connect & see testimonials*\n\n‚ö° *Prefer a different platform? Just let me know your preference!*`];return e[Math.floor(Math.random()*e.length)];}
function getTimeInfo(){return`‚è∞ **Project Timelines & Availability:**\n\nüöÄ **Current Availability:**\n‚Ä¢ **Immediate Start:** Available for new projects\n‚Ä¢ **Response Time:** Within 2-4 hours\n‚Ä¢ **Working Hours:** 9 AM - 11 PM IST (flexible)\n\n‚ö° **Typical Project Durations:**\n‚Ä¢ **Simple Website:** 1-2 weeks\n‚Ä¢ **E-commerce Platform:** 2-4 weeks  \n‚Ä¢ **Custom CRM/LMS:** 4-8 weeks\n‚Ä¢ **Complex Applications:** 6-12 weeks\n\nüìÖ **Project Management:**\n‚Ä¢ Daily progress updates\n‚Ä¢ Weekly milestone reviews\n‚Ä¢ Flexible with your timezone\n‚Ä¢ Emergency support available\n\nüéØ **Delivery Commitment:**\n‚Ä¢ On-time delivery guaranteed\n‚Ä¢ Regular communication\n‚Ä¢ Quality testing included\n‚Ä¢ Post-launch support\n\nüí¨ *Have a specific deadline? Let's discuss how I can accommodate your timeline!*`;}
function getAppreciationResponse(){const e=[`üôè Thank you so much! I'm really glad I could help. Kishan puts a lot of effort into delivering quality solutions - your appreciation means everything! Is there anything else you'd like to know?`,`üòä That's so kind of you to say! Kishan is passionate about creating amazing web solutions. Feel free to reach out anytime if you have more questions or want to start a project!`,`üåü Awesome! I'm thrilled you found the information helpful. Kishan would love to work with you on your next project. Ready to take the next step?`];return e[Math.floor(Math.random()*e.length)];}
function getPersonalizedResponse(e){const t=[`I notice you asked about this before! Let me give you some additional insights: `,`Great question - since you're particularly interested in this, here's more detail: `,`I can see this is important to you. Here's an expanded answer: `];const n=t[Math.floor(Math.random()*t.length)];return n+generateAdvancedResponse(e);}
function getIntelligentFallback(e){const t=[`ü§î That's an interesting question! While I may not have a specific answer for "${e}", I can definitely help you with information about Kishan's services, experience, or projects. What would you like to know more about?`,`üí° I want to make sure I give you the best information possible. Could you rephrase your question or ask about Kishan's PHP development, Laravel expertise, or specific project needs?`,`üéØ I'm here to help you learn about Kishan's web development services! Try asking about his Laravel projects, e-commerce solutions, or how he can help with your specific needs.`,`üìû For complex or specific technical questions, I'd recommend reaching out to Kishan directly via WhatsApp (+91 6375222806) for the most detailed response!`];return t[Math.floor(Math.random()*t.length)];}
function getContextualQuickReplies(e){if(e.includes('services')||e.includes('Service'))return[{emoji:'üíº',text:'View Experience'},{emoji:'üí∞',text:'Pricing Info'},{emoji:'üìû',text:'Get Free Quote'}];else if(e.includes('experience')||e.includes('projects'))return[{emoji:'üõí',text:'E-commerce Projects'},{emoji:'‚ö°',text:'Laravel Expertise'},{emoji:'ü§ù',text:'Hire Me Now'}];else if(e.includes('hire')||e.includes('contact'))return[{emoji:'üì±',text:'WhatsApp Chat'},{emoji:'üìß',text:'Send Email'},{emoji:'üíº',text:'LinkedIn Profile'}];return[];}
function toggleVoiceRecording(){if(!recognition){alert('Voice recognition is not supported in your browser. Please use Chrome for voice features.');return;}if(!isRecording)startRecording();else stopRecording();}
function startRecording(){isRecording=true;const e=document.getElementById('voiceBtn'),t=document.getElementById('chatbotInput');e.classList.add('recording');e.innerHTML='<i class="fas fa-stop"></i>';t.placeholder='Listening... Speak now!';recognition.start();playSound('start-record');}
function stopRecording(){isRecording=false;const e=document.getElementById('voiceBtn'),t=document.getElementById('chatbotInput');e.classList.remove('recording');e.innerHTML='<i class="fas fa-microphone"></i>';t.placeholder='Type your message... (or use voice)';if(recognition)recognition.stop();playSound('stop-record');}
function speakMessage(e){if(!speechSynthesis||!soundEnabled)return;try{const t=e.replace(/<[^>]*>/g,'').replace(/[‚Ä¢üîπüöÄüíºüìö‚ö°üè¢üåêüèÜüéØ]/g,'');if(t.length>200)return;const n=new SpeechSynthesisUtterance(t);n.rate=.9;n.pitch=1;n.volume=.8;const o=speechSynthesis.getVoices();const r=o.find(i=>i.name.includes('Google')&&i.lang.includes('en'))||o.find(i=>i.lang.includes('en'));if(r)n.voice=r;speechSynthesis.speak(n);}catch{}}
function toggleSound(){soundEnabled=!soundEnabled;const e=document.getElementById('soundBtn');if(e)e.innerHTML=soundEnabled?'<i class="fas fa-volume-up"></i>':'<i class="fas fa-volume-mute"></i>';localStorage.setItem('chatbotSoundEnabled',soundEnabled);playSound('message');}
function saveChatHistory(){const e=Array.from(document.querySelectorAll('#chatbotMessages .chat-msg')).map(t=>{const n=t.classList.contains('d-flex')&&t.classList.contains('align-items-start');const o=t.querySelector('div:last-child');return{sender:n?'bot':'user',content:o?o.innerHTML:'',timestamp:Date.now()};});localStorage.setItem('chatbotHistory',JSON.stringify(e));localStorage.setItem('chatbotUserData',JSON.stringify(currentUser));}
function loadChatHistory(){const e=localStorage.getItem('chatbotHistory'),t=localStorage.getItem('chatbotUserData'),n=localStorage.getItem('chatbotSoundEnabled');if(n!==null){soundEnabled=n==='true';const r=document.getElementById('soundBtn');if(r)r.innerHTML=soundEnabled?'<i class="fas fa-volume-up"></i>':'<i class="fas fa-volume-mute"></i>';}if(t){currentUser={...currentUser,...JSON.parse(t)};}if(e&&localStorage.getItem('chatbotShown')){const o=JSON.parse(e);if(o.length>1){const r=document.getElementById('chatbotMessages');r.innerHTML='';o.forEach(i=>{const s=document.createElement('div');s.className=i.sender==='bot'?'d-flex align-items-start gap-2 mb-3 chat-msg':'d-flex justify-content-end mb-3 chat-msg';if(i.sender==='bot'){s.innerHTML=`<div class="bg-primary bg-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" style="width:35px;height:35px;font-size:14px;">KB</div><div class="bg-white rounded-4 p-3 shadow-sm border" style="max-width:85%;border-bottom-left-radius:8px!important;border:1px solid rgba(102,126,234,.1);">${i.content}</div>`;}else{s.innerHTML=`<div class="bg-primary bg-gradient text-white rounded-4 p-3 shadow-sm" style="max-width:85%;border-bottom-right-radius:8px!important;">${i.content}</div>`;}r.appendChild(s);});messageCount=o.length;}}}
function clearChat(){if(confirm('Are you sure you want to clear the chat history?')){const e=document.getElementById('chatbotMessages');e.innerHTML='<div class="d-flex align-items-start gap-2 mb-3 chat-msg"><div class="bg-primary bg-gradient rounded-circle d-flex align-items-center justify-content-center text-white flex-shrink-0" style="width:35px;height:35px;font-size:14px;">KB</div><div class="bg-white rounded-4 p-3 shadow-sm border" style="max-width:85%;border-bottom-left-radius:8px!important;border:1px solid rgba(102,126,234,.1);">üîÑ Chat cleared! I\'m here whenever you need help with Kishan\'s services.<div class="text-muted small mt-1 text-start">'+new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})+'</div><div class="d-flex flex-wrap gap-1 mt-2"><button class="btn btn-light btn-sm rounded-pill" onclick="sendQuickReply(\'What services do you offer?\')" style="font-size:12px;padding:3px 12px;transition:all .3s ease;">üîß Services</button><button class="btn btn-light btn-sm rounded-pill" onclick="sendQuickReply(\'Tell me about your experience\')" style="font-size:12px;padding:3px 12px;transition:all .3s ease;">üíº Experience</button><button class="btn btn-light btn-sm rounded-pill" onclick="sendQuickReply(\'How can I hire you?\')" style="font-size:12px;padding:3px 12px;transition:all .3s ease;">üíº Hire Me</button></div></div></div>';messageCount=1;currentUser.previousQuestions=[];localStorage.removeItem('chatbotHistory');localStorage.removeItem('chatbotUserData');playSound('message');}}
function showEmojiPicker(){const e=['üòä','üëç','‚ù§Ô∏è','üéâ','üëè','üöÄ','üí°','üî•','‚≠ê','üíØ'],t=document.getElementById('chatbotInput'),n=t.value,o=e[Math.floor(Math.random()*e.length)];t.value=n+o;t.focus();}
function updateResponseTime(){const e=document.getElementById('responseTime');if(e){const t=['~1s','~2s','~1.5s','~0.8s'];e.textContent=t[Math.floor(Math.random()*t.length)];}}
setTimeout(()=>{if(!chatbotOpen&&!localStorage.getItem('chatbotShown')){setTimeout(()=>{if(!chatbotOpen)showNotification();},15000);}},8000);
window.addEventListener('load',()=>{try{if(window.speechSynthesis)window.speechSynthesis.getVoices();setTimeout(()=>{},500);}catch{}});
(function(){const e=document.querySelectorAll('[data-counter]');if(!e.length)return;const t=new IntersectionObserver((n,o)=>{n.forEach(r=>{if(!r.isIntersecting)return;const i=r.target,s=parseInt(i.getAttribute('data-counter'),10);if(isNaN(s)){o.unobserve(i);return;}let l=0;const c=900,d=Math.max(1,Math.ceil(s/(c/30))),u=setInterval(()=>{l+=d;if(l>=s){i.textContent=i.textContent.includes('%')?s+'%':s+(i.textContent.includes('+')?'+':'');clearInterval(u);}else{i.textContent=i.textContent.includes('%')?l+'%':l+(i.textContent.includes('+')?'+':'');}},30);o.unobserve(i);});},{threshold:.4});e.forEach(n=>t.observe(n));})();
// Expose minimal API for onclick handlers in HTML
window.toggleChatbot=toggleChatbot;window.minimizeChat=minimizeChat;window.handleKeyPress=handleKeyPress;window.sendMessage=sendMessage;window.sendQuickReply=sendQuickReply;window.toggleVoiceRecording=toggleVoiceRecording;window.showEmojiPicker=showEmojiPicker;window.clearChat=clearChat;window.toggleSound=toggleSound;